{% load humanize %}
<html>
  <head>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-91056124-1', 'auto');ga('send', 'pageview');
  </script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" />
  <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type='text/javascript' src='https://www.gstatic.com/charts/loader.js'></script>
  <script type='text/javascript'>
    google.charts.load('current', {'packages':['line']});
    google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('date', 'Date');
        data.addColumn('number', 'RPs');
        data.addRows([
          {% for d in data %}
          [new Date({{d.lastupdated.year}}, {{d.lastupdated.month}}-1 ,{{d.lastupdated.day}}), {{d.rps}}],
          {% endfor %}
        ]);
        var options = {
        chart: {
            title: 'RPs over the last week',
          },
        };
        var chart = new google.charts.Line(document.getElementById('linechart_material'));

        chart.draw(data, options);
      }
    </script>
    <title>Player History</title>
  </head>

  <body>
    {% include "navbar.html" %}
    <div class="col-md-10 col-md-offset-1">
      <table id="eader" class="table table-striped">
        <thead>
          <th>Name</th>
          <th>Realm</th>
          <th>Guild</th>
          <th>Race</th>
          <th>Class</th>
          <th>RPs</th>
          <th>RealmRank</th>
        </thead>
        <tbody>
          <tr>
            <td>{{data.0.rawname}}</td>
            <td class="realm_{{data.0.realmname}}">{{data.0.realmname}}</td>
            <td>{% if data.0.guildname %}{{data.0.guildname}}{% else %}<i>No Guild</i>{% endif %}</td>
            <td>{{data.0.racename}}</td>
            <td>{{data.0.classname}}</td>
            <td>{{data.0.rps|intcomma}}</td>
            <td>{{data.0.realmrank}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-4 col-md-offset-1">
      <div id='linechart_material' width="100%"></div>
    </div>
  </body>
</html>